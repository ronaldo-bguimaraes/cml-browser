(()=>{"use strict";const e={get STRING(){return new RegExp("(\"(?:.*?)\"|'(?:.*?)')")},get DOCTYPE(){return new RegExp("(!doctype)","i")},get WORD(){return new RegExp("(\\b(?:[\\w-]+)\\b)")},get MODULE(){return new RegExp(`(@${this.WORD.source})`)},get KEYWORD(){return new RegExp(`(\\$${this.WORD.source})`)},get TAG(){return new RegExp(`(${this.DOCTYPE.source}|${this.WORD.source}|${this.MODULE.source})`,"i")},get OPEN_BRACKET(){return new RegExp("(\\[)")},get CLOSE_BRACKET(){return new RegExp("(\\])")},get BRACKETS(){return new RegExp(`(${this.OPEN_BRACKET.source}|${this.CLOSE_BRACKET.source})`)},get OPEN_BRACE(){return new RegExp("({)")},get CLOSE_BRACE(){return new RegExp("(})")},get BRACES(){return new RegExp(`(${this.OPEN_BRACE.source}|${this.CLOSE_BRACE.source})`)},get EQUAL(){return new RegExp("(=)")},get NEW_LINE(){return new RegExp("(\\n)")},get MATCH(){return new RegExp(`(${this.STRING.source}|${this.TAG.source}|${this.KEYWORD.source}|${this.BRACKETS.source}|${this.BRACES.source}|${this.EQUAL.source}|${this.NEW_LINE.source})`,"gi")}},t={get STRING(){return new RegExp(`^${e.STRING.source}$`)},get DOCTYPE(){return new RegExp(`^${e.DOCTYPE.source}$`,"i")},get WORD(){return new RegExp(`^${e.WORD.source}$`)},get MODULE(){return new RegExp(`^${e.MODULE.source}$`)},get KEYWORD(){return new RegExp(`^${e.KEYWORD.source}$`)},get TAG(){return new RegExp(`^${e.TAG.source}$`,"i")},get OPEN_BRACKET(){return new RegExp(`^${e.OPEN_BRACKET.source}$`)},get CLOSE_BRACKET(){return new RegExp(`^${e.CLOSE_BRACKET.source}$`)},get BRACKETS(){return new RegExp(`^${e.BRACKETS.source}$`)},get OPEN_BRACE(){return new RegExp(`^${e.OPEN_BRACE.source}$`)},get CLOSE_BRACE(){return new RegExp(`^${e.CLOSE_BRACE.source}$`)},get BRACES(){return new RegExp(`^${e.BRACES.source}$`)},get EQUAL(){return new RegExp(`^${e.EQUAL.source}$`)},get NEW_LINE(){return new RegExp(`^${e.NEW_LINE.source}$`)},get MATCH(){return new RegExp(`^${e.MATCH.source}$`,"gi")}};var n;!function(e){e[e.DOCTYPE=0]="DOCTYPE",e[e.CHILDREN=1]="CHILDREN",e[e.ATTRIBUTE=2]="ATTRIBUTE",e[e.EQUAL=3]="EQUAL",e[e.VALUE=4]="VALUE",e[e.OPEN_BRACE=5]="OPEN_BRACE"}(n||(n={}));class r{name;attributes=new Map;children=[];parent;constructor(e){this.name=e}appendChild(e){return this.children.push(e),e instanceof r&&(e.parent=this),e}get root(){return void 0!==this.parent?this.parent.root:this}}const E=new Map;function s(e,t){for(const n of e.children)if("$children"===n){const r=e.children.indexOf(n);e.children.splice(r,1,...t)}}function o(e,n){for(const i of e.children)if(i instanceof r)if(/^(declare)$/.test(i.name))o(i,!0),e.children=e.children.filter((e=>e!==i));else if(t.MODULE.test(i.name))if(void 0===n||!0===n)E.set(i.name,i);else{const t=E.get(i.name);if(void 0===t)throw new Error(`Module ${i.name} not found!`);{const n=t.children[0];if(n instanceof r){const t=new r(n.name);for(const e of n.attributes)t.attributes.set(e[0],e[1]);for(const e of i.attributes)t.attributes.set(e[0],e[1]);for(const e of n.children)t.children.push(e);t.parent=i.parent,s(t,i.children);const E=e.children.indexOf(i);e.children.splice(E,1,t)}}}else o(i,!1);return e}const i=new RegExp("^(!doctype|area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$","i");function c(e){const t=[],n=[];for(const n of e.children)t.push(n instanceof r?c(n):n);for(const t of e.attributes)n.push(` ${t[0]}${t[1]?`=${t[1]}`:""}`);return void 0!==e.parent?`<${e.name}${n.join("")}>${i.test(e.name)?"":`${t.join("")}</${e.name}>`}`:`${t.join("")}`}function u(E){return c(o(function(e){let E,s=n.DOCTYPE,o=new r("document"),i=!1;function c(e){const t=new r(e);o=o.appendChild(t),s=n.ATTRIBUTE}function u(){void 0!==o.parent&&(o=o.parent)}for(const r of e)s===n.DOCTYPE?t.TAG.test(r)&&c(r):s===n.CHILDREN?t.STRING.test(r)?o.appendChild(r.slice(1,-1)):t.KEYWORD.test(r)?o.appendChild(r):t.TAG.test(r)?c(r):t.CLOSE_BRACE.test(r)&&u():s===n.OPEN_BRACE?t.OPEN_BRACE.test(r)?s=n.CHILDREN:(u(),t.KEYWORD.test(r)?o.appendChild(r):t.STRING.test(r)?o.appendChild(r.slice(1,-1)):t.TAG.test(r)&&c(r)):s===n.ATTRIBUTE?t.WORD.test(r)?(E=r,o.attributes.set(E,void 0),s=n.EQUAL):t.NEW_LINE.test(r)&&!1===i?s=n.OPEN_BRACE:t.OPEN_BRACE.test(r)?s=n.CHILDREN:t.OPEN_BRACKET.test(r)?i=!0:t.CLOSE_BRACKET.test(r)&&(i=!1):s===n.EQUAL?t.EQUAL.test(r)?s=n.VALUE:t.WORD.test(r)?(E=r,o.attributes.set(E,void 0),s=n.EQUAL):t.NEW_LINE.test(r)&&(s=n.OPEN_BRACE):s===n.VALUE&&(t.STRING.test(r)?(void 0!==E&&o.attributes.set(E,r),s=n.ATTRIBUTE):t.NEW_LINE.test(r)&&(u(),s=n.CHILDREN));return o.root}(function(t){const n=[],r=t.matchAll(e.MATCH);for(const e of r)n.push(e[0]);return n}(E))))}const R=new DOMParser,p=function(e){const t=u('\n\n!DOCTYPE html\nhtml lang="pt-br" {\n  head {\n    meta charset="utf-8"\n    meta name=\'viewport\' content="width=device-width, initial-scale=1"\n    link ref="icon" href="#"\n    title {"CML"}\n  }\n  body\n  {\n    declare {\n      @container {\n        div {\n          $children\n        }\n      }\n    }\n    input id="nome"\n  }\n}\n\n');return R.parseFromString(t,"text/html")}();document.head?.replaceWith(p.head),document.body?.replaceWith(p.body)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBRTNCUCxFQUFRckMsRUFBTVgsWUFNVGdELElBQVVyQyxFQUFNK0MsUUFFbkJqRCxFQUFNUCxPQUFPNkIsS0FBS3dCLFNBRUdsQyxJQUFuQjBCLEdBRUZFLEVBQVNuQyxXQUFXb0IsSUFBSWEsRUFBZ0JRLEdBSTFDUCxFQUFRckMsRUFBTTBDLFdBSVA1QyxFQUFNRCxTQUFTdUIsS0FBS3dCLEtBRTNCRCxJQUVBTixFQUFRckMsRUFBTTZDLFdBUXBCLE9BQU9QLEVBQVMzQixLR3ZPSXFDLENKb0h0QixTQUFjZCxHQUVaLE1BQU1lLEVBQXFCLEdBRXJCQyxFQUFXaEIsRUFBT2dCLFNBQVN0RSxFQUFNbUIsT0FFdkMsSUFBSyxNQUFNb0QsS0FBU0QsRUFFbEJELEVBQVN4QyxLQUFLMEMsRUFBTSxJQUl0QixPQUFPRixFSWxJWUcsQ0FBS2xCLE1BVTFCLE1BQU1tQixFQUFTLElBQUlDLFVDT2JDLEVETE4sU0FBbUJyQixHQUVqQixNQUFNc0IsRUFBWXZCLEVDdEJMLDhWRHdCYixPQUFPb0IsRUFBT0ksZ0JBQWdCRCxFQUFXLGFDQzlCRSxHQUVicEIsU0FBU3FCLE1BQU1DLFlBQVlMLEVBQUtJLE1BRWhDckIsU0FBU3VCLE1BQU1ELFlBQVlMLEVBQUtNLE8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2Nhbm5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFyc2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9hbmFseXplci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9jbWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFRPS0VOID0ge1xyXG5cclxuICBnZXQgU1RSSU5HKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYChcIig/Oi4qPylcInwnKD86Lio/KScpYCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0IERPQ1RZUEUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgKCFkb2N0eXBlKWAsIFwiaVwiKTtcclxuICB9LFxyXG5cclxuICBnZXQgV09SRCgpIHtcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKGAoXFxcXGIoPzpbXFxcXHctXSspXFxcXGIpYCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0IE1PRFVMRSgpIHtcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKGAoQCR7dGhpcy5XT1JELnNvdXJjZX0pYCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0IEtFWVdPUkQoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgKFxcXFwkJHt0aGlzLldPUkQuc291cmNlfSlgKTtcclxuICB9LFxyXG5cclxuICBnZXQgVEFHKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYCgke3RoaXMuRE9DVFlQRS5zb3VyY2V9fCR7dGhpcy5XT1JELnNvdXJjZX18JHt0aGlzLk1PRFVMRS5zb3VyY2V9KWAsIFwiaVwiKVxyXG4gIH0sXHJcblxyXG4gIGdldCBPUEVOX0JSQUNLRVQoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgKFxcXFxbKWApO1xyXG4gIH0sXHJcblxyXG4gIGdldCBDTE9TRV9CUkFDS0VUKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYChcXFxcXSlgKTtcclxuICB9LFxyXG5cclxuICBnZXQgQlJBQ0tFVFMoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgKCR7dGhpcy5PUEVOX0JSQUNLRVQuc291cmNlfXwke3RoaXMuQ0xPU0VfQlJBQ0tFVC5zb3VyY2V9KWApO1xyXG4gIH0sXHJcblxyXG4gIGdldCBPUEVOX0JSQUNFKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYCh7KWApO1xyXG4gIH0sXHJcblxyXG4gIGdldCBDTE9TRV9CUkFDRSgpIHtcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKGAofSlgKTtcclxuICB9LFxyXG5cclxuICBnZXQgQlJBQ0VTKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYCgke3RoaXMuT1BFTl9CUkFDRS5zb3VyY2V9fCR7dGhpcy5DTE9TRV9CUkFDRS5zb3VyY2V9KWApO1xyXG4gIH0sXHJcblxyXG4gIGdldCBFUVVBTCgpIHtcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKGAoPSlgKTtcclxuICB9LFxyXG5cclxuICBnZXQgTkVXX0xJTkUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgKFxcXFxuKWApO1xyXG4gIH0sXHJcblxyXG4gIGdldCBNQVRDSCgpIHtcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKGAoJHt0aGlzLlNUUklORy5zb3VyY2V9fCR7dGhpcy5UQUcuc291cmNlfXwke3RoaXMuS0VZV09SRC5zb3VyY2V9fCR7dGhpcy5CUkFDS0VUUy5zb3VyY2V9fCR7dGhpcy5CUkFDRVMuc291cmNlfXwke3RoaXMuRVFVQUwuc291cmNlfXwke3RoaXMuTkVXX0xJTkUuc291cmNlfSlgLCBcImdpXCIpO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmNvbnN0IEVYQUNUID0ge1xyXG5cclxuICBnZXQgU1RSSU5HKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke1RPS0VOLlNUUklORy5zb3VyY2V9JGApO1xyXG4gIH0sXHJcblxyXG4gIGdldCBET0NUWVBFKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke1RPS0VOLkRPQ1RZUEUuc291cmNlfSRgLCBcImlcIik7XHJcbiAgfSxcclxuXHJcbiAgZ2V0IFdPUkQoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7VE9LRU4uV09SRC5zb3VyY2V9JGApO1xyXG4gIH0sXHJcblxyXG4gIGdldCBNT0RVTEUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7VE9LRU4uTU9EVUxFLnNvdXJjZX0kYCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0IEtFWVdPUkQoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7VE9LRU4uS0VZV09SRC5zb3VyY2V9JGApO1xyXG4gIH0sXHJcblxyXG4gIGdldCBUQUcoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7VE9LRU4uVEFHLnNvdXJjZX0kYCwgXCJpXCIpXHJcbiAgfSxcclxuXHJcbiAgZ2V0IE9QRU5fQlJBQ0tFVCgpIHtcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHtUT0tFTi5PUEVOX0JSQUNLRVQuc291cmNlfSRgKTtcclxuICB9LFxyXG5cclxuICBnZXQgQ0xPU0VfQlJBQ0tFVCgpIHtcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHtUT0tFTi5DTE9TRV9CUkFDS0VULnNvdXJjZX0kYCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0IEJSQUNLRVRTKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke1RPS0VOLkJSQUNLRVRTLnNvdXJjZX0kYCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0IE9QRU5fQlJBQ0UoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7VE9LRU4uT1BFTl9CUkFDRS5zb3VyY2V9JGApO1xyXG4gIH0sXHJcblxyXG4gIGdldCBDTE9TRV9CUkFDRSgpIHtcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHtUT0tFTi5DTE9TRV9CUkFDRS5zb3VyY2V9JGApO1xyXG4gIH0sXHJcblxyXG4gIGdldCBCUkFDRVMoKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7VE9LRU4uQlJBQ0VTLnNvdXJjZX0kYCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0IEVRVUFMKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke1RPS0VOLkVRVUFMLnNvdXJjZX0kYCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0IE5FV19MSU5FKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke1RPS0VOLk5FV19MSU5FLnNvdXJjZX0kYCk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0IE1BVENIKCkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke1RPS0VOLk1BVENILnNvdXJjZX0kYCwgXCJnaVwiKTtcclxuICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBzY2FuKHN0cmluZzogc3RyaW5nKSB7XHJcblxyXG4gIGNvbnN0IGxleEFycmF5OiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICBjb25zdCBtYXRjaEFsbCA9IHN0cmluZy5tYXRjaEFsbChUT0tFTi5NQVRDSCk7XHJcblxyXG4gIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hBbGwpIHtcclxuXHJcbiAgICBsZXhBcnJheS5wdXNoKG1hdGNoWzBdKTtcclxuXHJcbiAgfVxyXG5cclxuICByZXR1cm4gbGV4QXJyYXk7XHJcblxyXG59XHJcblxyXG5leHBvcnQgeyBzY2FuLCBUT0tFTiwgRVhBQ1QgfTsiLCJpbXBvcnQgeyBFWEFDVCB9IGZyb20gXCIuL3NjYW5uZXJcIjtcclxuXHJcbmVudW0gQVdBSVQgeyBET0NUWVBFLCBDSElMRFJFTiwgQVRUUklCVVRFLCBFUVVBTCwgVkFMVUUsIE9QRU5fQlJBQ0UgfTtcclxuXHJcbmNsYXNzIFZpcnR1YWxOb2RlIHtcclxuXHJcbiAgcHVibGljIG5hbWU6IHN0cmluZztcclxuXHJcbiAgcHVibGljIGF0dHJpYnV0ZXM6IE1hcDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZD4gPSBuZXcgTWFwKCk7XHJcblxyXG4gIHB1YmxpYyBjaGlsZHJlbjogKFZpcnR1YWxOb2RlIHwgc3RyaW5nKVtdID0gW107XHJcblxyXG4gIHB1YmxpYyBwYXJlbnQ/OiBWaXJ0dWFsTm9kZTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZykge1xyXG5cclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcblxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFwcGVuZENoaWxkPFQgZXh0ZW5kcyBWaXJ0dWFsTm9kZSB8IHN0cmluZz4oY2hpbGQ6IFQpIHtcclxuXHJcbiAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG5cclxuICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFZpcnR1YWxOb2RlKSB7XHJcblxyXG4gICAgICBjaGlsZC5wYXJlbnQgPSB0aGlzO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2hpbGQ7XHJcblxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCByb290KCk6IFZpcnR1YWxOb2RlIHtcclxuXHJcbiAgICBpZiAodGhpcy5wYXJlbnQgIT09IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMucGFyZW50LnJvb3Q7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGVsc2UgcmV0dXJuIHRoaXM7XHJcblxyXG4gIH1cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlKHRva2VuTGlzdDogc3RyaW5nW10pIHtcclxuXHJcbiAgbGV0IFNUQVRFOiBBV0FJVCA9IEFXQUlULkRPQ1RZUEU7XHJcblxyXG4gIGxldCBkb2N1bWVudCA9IG5ldyBWaXJ0dWFsTm9kZShcImRvY3VtZW50XCIpO1xyXG5cclxuICBsZXQgQVRUUklCVVRFX05BTUUgPSB1bmRlZmluZWQ7XHJcblxyXG4gIGxldCBJR05PUkVfTkVXX2xJTkUgPSBmYWxzZTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlVmlydHVhbE5vZGUobmFtZTogc3RyaW5nKSB7XHJcblxyXG4gICAgY29uc3Qgbm9kZSA9IG5ldyBWaXJ0dWFsTm9kZShuYW1lKTtcclxuXHJcbiAgICBkb2N1bWVudCA9IGRvY3VtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xyXG5cclxuICAgIFNUQVRFID0gQVdBSVQuQVRUUklCVVRFO1xyXG5cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwTGV2ZWwoKSB7XHJcblxyXG4gICAgLy8gc29iZSB1bSBuw612ZWxcclxuICAgIGlmIChkb2N1bWVudC5wYXJlbnQgIT09IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgZG9jdW1lbnQgPSBkb2N1bWVudC5wYXJlbnQ7XHJcblxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIGZvciAoY29uc3QgdG9rZW4gb2YgdG9rZW5MaXN0KSB7XHJcblxyXG4gICAgaWYgKFNUQVRFID09PSBBV0FJVC5ET0NUWVBFKSB7XHJcblxyXG4gICAgICBpZiAoRVhBQ1QuVEFHLnRlc3QodG9rZW4pKSB7XHJcblxyXG4gICAgICAgIGNyZWF0ZVZpcnR1YWxOb2RlKHRva2VuKTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZWxzZSBpZiAoU1RBVEUgPT09IEFXQUlULkNISUxEUkVOKSB7XHJcblxyXG4gICAgICBpZiAoRVhBQ1QuU1RSSU5HLnRlc3QodG9rZW4pKSB7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmFwcGVuZENoaWxkKHRva2VuLnNsaWNlKDEsIC0xKSk7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBlbHNlIGlmIChFWEFDVC5LRVlXT1JELnRlc3QodG9rZW4pKSB7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmFwcGVuZENoaWxkKHRva2VuKTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVsc2UgaWYgKEVYQUNULlRBRy50ZXN0KHRva2VuKSkge1xyXG5cclxuICAgICAgICBjcmVhdGVWaXJ0dWFsTm9kZSh0b2tlbik7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBlbHNlIGlmIChFWEFDVC5DTE9TRV9CUkFDRS50ZXN0KHRva2VuKSkge1xyXG5cclxuICAgICAgICB1cExldmVsKCk7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGVsc2UgaWYgKFNUQVRFID09PSBBV0FJVC5PUEVOX0JSQUNFKSB7XHJcblxyXG4gICAgICBpZiAoRVhBQ1QuT1BFTl9CUkFDRS50ZXN0KHRva2VuKSkge1xyXG5cclxuICAgICAgICBTVEFURSA9IEFXQUlULkNISUxEUkVOO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgIHVwTGV2ZWwoKTtcclxuXHJcbiAgICAgICAgaWYgKEVYQUNULktFWVdPUkQudGVzdCh0b2tlbikpIHtcclxuXHJcbiAgICAgICAgICBkb2N1bWVudC5hcHBlbmRDaGlsZCh0b2tlbik7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWxzZSBpZiAoRVhBQ1QuU1RSSU5HLnRlc3QodG9rZW4pKSB7XHJcblxyXG4gICAgICAgICAgZG9jdW1lbnQuYXBwZW5kQ2hpbGQodG9rZW4uc2xpY2UoMSwgLTEpKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbHNlIGlmIChFWEFDVC5UQUcudGVzdCh0b2tlbikpIHtcclxuXHJcbiAgICAgICAgICBjcmVhdGVWaXJ0dWFsTm9kZSh0b2tlbik7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZWxzZSBpZiAoU1RBVEUgPT09IEFXQUlULkFUVFJJQlVURSkge1xyXG5cclxuICAgICAgaWYgKEVYQUNULldPUkQudGVzdCh0b2tlbikpIHtcclxuXHJcbiAgICAgICAgQVRUUklCVVRFX05BTUUgPSB0b2tlbjtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYXR0cmlidXRlcy5zZXQoQVRUUklCVVRFX05BTUUsIHVuZGVmaW5lZCk7XHJcblxyXG4gICAgICAgIFNUQVRFID0gQVdBSVQuRVFVQUw7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBlbHNlIGlmIChFWEFDVC5ORVdfTElORS50ZXN0KHRva2VuKSAmJiBJR05PUkVfTkVXX2xJTkUgPT09IGZhbHNlKSB7XHJcblxyXG4gICAgICAgIFNUQVRFID0gQVdBSVQuT1BFTl9CUkFDRTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVsc2UgaWYgKEVYQUNULk9QRU5fQlJBQ0UudGVzdCh0b2tlbikpIHtcclxuXHJcbiAgICAgICAgU1RBVEUgPSBBV0FJVC5DSElMRFJFTjtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVsc2UgaWYgKEVYQUNULk9QRU5fQlJBQ0tFVC50ZXN0KHRva2VuKSkge1xyXG5cclxuICAgICAgICBJR05PUkVfTkVXX2xJTkUgPSB0cnVlO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgZWxzZSBpZiAoRVhBQ1QuQ0xPU0VfQlJBQ0tFVC50ZXN0KHRva2VuKSkge1xyXG5cclxuICAgICAgICBJR05PUkVfTkVXX2xJTkUgPSBmYWxzZTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZWxzZSBpZiAoU1RBVEUgPT09IEFXQUlULkVRVUFMKSB7XHJcblxyXG4gICAgICBpZiAoRVhBQ1QuRVFVQUwudGVzdCh0b2tlbikpIHtcclxuXHJcbiAgICAgICAgU1RBVEUgPSBBV0FJVC5WQUxVRTtcclxuXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVsc2UgaWYgKEVYQUNULldPUkQudGVzdCh0b2tlbikpIHtcclxuXHJcbiAgICAgICAgQVRUUklCVVRFX05BTUUgPSB0b2tlbjtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYXR0cmlidXRlcy5zZXQoQVRUUklCVVRFX05BTUUsIHVuZGVmaW5lZCk7XHJcblxyXG4gICAgICAgIFNUQVRFID0gQVdBSVQuRVFVQUw7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBlbHNlIGlmIChFWEFDVC5ORVdfTElORS50ZXN0KHRva2VuKSkge1xyXG5cclxuICAgICAgICBTVEFURSA9IEFXQUlULk9QRU5fQlJBQ0U7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGVsc2UgaWYgKFNUQVRFID09PSBBV0FJVC5WQUxVRSkge1xyXG5cclxuICAgICAgaWYgKEVYQUNULlNUUklORy50ZXN0KHRva2VuKSkge1xyXG5cclxuICAgICAgICBpZiAoQVRUUklCVVRFX05BTUUgIT09IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICAgIGRvY3VtZW50LmF0dHJpYnV0ZXMuc2V0KEFUVFJJQlVURV9OQU1FLCB0b2tlbik7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU1RBVEUgPSBBV0FJVC5BVFRSSUJVVEU7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBlbHNlIGlmIChFWEFDVC5ORVdfTElORS50ZXN0KHRva2VuKSkge1xyXG5cclxuICAgICAgICB1cExldmVsKCk7XHJcblxyXG4gICAgICAgIFNUQVRFID0gQVdBSVQuQ0hJTERSRU47XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIHJldHVybiBkb2N1bWVudC5yb290O1xyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgcGFyc2UsIFZpcnR1YWxOb2RlIH07IiwiaW1wb3J0IHsgVmlydHVhbE5vZGUgfSBmcm9tIFwiLi9wYXJzZXJcIjtcclxuXHJcbmltcG9ydCB7IEVYQUNUIH0gZnJvbSBcIi4vc2Nhbm5lclwiO1xyXG5cclxuY29uc3QgZGVjbGFyZUxpc3Q6IE1hcDxzdHJpbmcsIFZpcnR1YWxOb2RlPiA9IG5ldyBNYXAoKTtcclxuXHJcbmZ1bmN0aW9uIHJlcGxhY2VDaGlsZHJlbih2aXJ0dWFsTm9kZTogVmlydHVhbE5vZGUsIGNoaWxkcmVuOiAoVmlydHVhbE5vZGUgfCBzdHJpbmcpW10pIHtcclxuXHJcbiAgZm9yIChjb25zdCBjaGlsZCBvZiB2aXJ0dWFsTm9kZS5jaGlsZHJlbikge1xyXG5cclxuICAgIGlmIChjaGlsZCA9PT0gXCIkY2hpbGRyZW5cIikge1xyXG5cclxuICAgICAgY29uc3QgaW5kZXggPSB2aXJ0dWFsTm9kZS5jaGlsZHJlbi5pbmRleE9mKGNoaWxkKTtcclxuXHJcbiAgICAgIHZpcnR1YWxOb2RlLmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSwgLi4uY2hpbGRyZW4pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gYW5hbHl6ZSh2aXJ0dWFsTm9kZTogVmlydHVhbE5vZGUsIGRlY2xhcmU/OiBib29sZWFuKTogVmlydHVhbE5vZGUge1xyXG5cclxuICBmb3IgKGNvbnN0IGNoaWxkIG9mIHZpcnR1YWxOb2RlLmNoaWxkcmVuKSB7XHJcblxyXG4gICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVmlydHVhbE5vZGUpIHtcclxuXHJcbiAgICAgIGlmICgvXihkZWNsYXJlKSQvLnRlc3QoY2hpbGQubmFtZSkpIHtcclxuXHJcbiAgICAgICAgYW5hbHl6ZShjaGlsZCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIHZpcnR1YWxOb2RlLmNoaWxkcmVuID0gdmlydHVhbE5vZGUuY2hpbGRyZW4uZmlsdGVyKGEgPT4gYSAhPT0gY2hpbGQpO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgZWxzZSBpZiAoRVhBQ1QuTU9EVUxFLnRlc3QoY2hpbGQubmFtZSkpIHtcclxuXHJcbiAgICAgICAgaWYgKGRlY2xhcmUgPT09IHVuZGVmaW5lZCB8fCBkZWNsYXJlID09PSB0cnVlKSB7XHJcblxyXG4gICAgICAgICAgZGVjbGFyZUxpc3Quc2V0KGNoaWxkLm5hbWUsIGNoaWxkKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICBjb25zdCBvYmplY3QgPSBkZWNsYXJlTGlzdC5nZXQoY2hpbGQubmFtZSk7XHJcblxyXG4gICAgICAgICAgaWYgKG9iamVjdCAhPT0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IG9iamVjdC5jaGlsZHJlblswXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZSBpbnN0YW5jZW9mIFZpcnR1YWxOb2RlKSB7XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IGNsb25lID0gbmV3IFZpcnR1YWxOb2RlKHRlbXBsYXRlLm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB0ZW1wbGF0ZS5hdHRyaWJ1dGVzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY2xvbmUuYXR0cmlidXRlcy5zZXQoYXR0cmlidXRlWzBdLCBhdHRyaWJ1dGVbMV0pO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGNoaWxkLmF0dHJpYnV0ZXMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjbG9uZS5hdHRyaWJ1dGVzLnNldChhdHRyaWJ1dGVbMF0sIGF0dHJpYnV0ZVsxXSk7XHJcblxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiB0ZW1wbGF0ZS5jaGlsZHJlbikge1xyXG5cclxuICAgICAgICAgICAgICAgIGNsb25lLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG5cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGNsb25lLnBhcmVudCA9IGNoaWxkLnBhcmVudDtcclxuXHJcbiAgICAgICAgICAgICAgcmVwbGFjZUNoaWxkcmVuKGNsb25lLCBjaGlsZC5jaGlsZHJlbik7XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdmlydHVhbE5vZGUuY2hpbGRyZW4uaW5kZXhPZihjaGlsZCk7XHJcblxyXG4gICAgICAgICAgICAgIHZpcnR1YWxOb2RlLmNoaWxkcmVuLnNwbGljZShpbmRleCwgMSwgY2xvbmUpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBlbHNlIHRocm93IG5ldyBFcnJvcihgTW9kdWxlICR7Y2hpbGQubmFtZX0gbm90IGZvdW5kIWApO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBlbHNlIGFuYWx5emUoY2hpbGQsIGZhbHNlKTtcclxuXHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHZpcnR1YWxOb2RlO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgYW5hbHl6ZSB9OyIsImltcG9ydCB7IFZpcnR1YWxOb2RlIH0gZnJvbSBcIi4vcGFyc2VyXCI7XHJcblxyXG5jb25zdCBWT0lEX1RBRyA9IG5ldyBSZWdFeHAoYF4oIWRvY3R5cGV8YXJlYXxiYXNlfGJyfGNvbHxjb21tYW5kfGVtYmVkfGhyfGltZ3xpbnB1dHxrZXlnZW58bGlua3xtZXRhfHBhcmFtfHNvdXJjZXx0cmFja3x3YnIpJGAsIFwiaVwiKTtcclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlKHZpcnR1YWxOb2RlOiBWaXJ0dWFsTm9kZSk6IHN0cmluZyB7XHJcblxyXG4gIGNvbnN0IGNoaWxkcmVuOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICBjb25zdCBhdHRyaWJ1dGVzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICBmb3IgKGNvbnN0IGNoaWxkIG9mIHZpcnR1YWxOb2RlLmNoaWxkcmVuKSB7XHJcblxyXG4gICAgY2hpbGRyZW4ucHVzaChjaGlsZCBpbnN0YW5jZW9mIFZpcnR1YWxOb2RlID8gZ2VuZXJhdGUoY2hpbGQpIDogY2hpbGQpO1xyXG5cclxuICB9XHJcblxyXG4gIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIHZpcnR1YWxOb2RlLmF0dHJpYnV0ZXMpIHtcclxuXHJcbiAgICBhdHRyaWJ1dGVzLnB1c2goYCAke2F0dHJpYnV0ZVswXX0ke2F0dHJpYnV0ZVsxXSA/IGA9JHthdHRyaWJ1dGVbMV19YCA6IFwiXCJ9YCk7XHJcblxyXG4gIH1cclxuXHJcbiAgaWYgKHZpcnR1YWxOb2RlLnBhcmVudCAhPT0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgcmV0dXJuIGA8JHt2aXJ0dWFsTm9kZS5uYW1lfSR7YXR0cmlidXRlcy5qb2luKFwiXCIpfT4ke1ZPSURfVEFHLnRlc3QodmlydHVhbE5vZGUubmFtZSkgPyBcIlwiIDogYCR7Y2hpbGRyZW4uam9pbihcIlwiKX08LyR7dmlydHVhbE5vZGUubmFtZX0+YH1gO1xyXG5cclxuICB9XHJcblxyXG4gIGVsc2UgcmV0dXJuIGAke2NoaWxkcmVuLmpvaW4oXCJcIil9YDtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7IGdlbmVyYXRlIH07IiwiaW1wb3J0IHsgc2NhbiB9IGZyb20gXCIuL3NjYW5uZXJcIjtcclxuXHJcbmltcG9ydCB7IHBhcnNlIH0gZnJvbSBcIi4vcGFyc2VyXCI7XHJcblxyXG5pbXBvcnQgeyBhbmFseXplIH0gZnJvbSBcIi4vYW5hbHl6ZXJcIjtcclxuXHJcbmltcG9ydCB7IGdlbmVyYXRlIH0gZnJvbSBcIi4vZ2VuZXJhdG9yXCI7XHJcblxyXG5mdW5jdGlvbiBjbWxUb1N0cmluZyhzdHJpbmc6IHN0cmluZykge1xyXG5cclxuICBjb25zdCBzY2FuUmVzdWx0ID0gc2NhbihzdHJpbmcpO1xyXG5cclxuICBjb25zdCBwYXJzZVJlc3VsdCA9IHBhcnNlKHNjYW5SZXN1bHQpO1xyXG5cclxuICBjb25zdCBhbmFseXplUmVzdWx0ID0gYW5hbHl6ZShwYXJzZVJlc3VsdCk7XHJcblxyXG4gIHJldHVybiBnZW5lcmF0ZShhbmFseXplUmVzdWx0KTtcclxuXHJcbn1cclxuXHJcbmNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuXHJcbmZ1bmN0aW9uIGNtbFRvSHRtbChzdHJpbmc6IHN0cmluZykge1xyXG5cclxuICBjb25zdCBjbWxSZXN1bHQgPSBjbWxUb1N0cmluZyhzdHJpbmcpO1xyXG5cclxuICByZXR1cm4gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhjbWxSZXN1bHQsIFwidGV4dC9odG1sXCIpO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgY21sVG9TdHJpbmcsIGNtbFRvSHRtbCB9OyIsImltcG9ydCB7IGNtbFRvSHRtbCB9IGZyb20gXCIuL2NtbFwiO1xyXG5cclxuY29uc3Qgc3RyaW5nID0gYFxyXG5cclxuIURPQ1RZUEUgaHRtbFxyXG5odG1sIGxhbmc9XCJwdC1iclwiIHtcclxuICBoZWFkIHtcclxuICAgIG1ldGEgY2hhcnNldD1cInV0Zi04XCJcclxuICAgIG1ldGEgbmFtZT0ndmlld3BvcnQnIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MVwiXHJcbiAgICBsaW5rIHJlZj1cImljb25cIiBocmVmPVwiI1wiXHJcbiAgICB0aXRsZSB7XCJDTUxcIn1cclxuICB9XHJcbiAgYm9keVxyXG4gIHtcclxuICAgIGRlY2xhcmUge1xyXG4gICAgICBAY29udGFpbmVyIHtcclxuICAgICAgICBkaXYge1xyXG4gICAgICAgICAgJGNoaWxkcmVuXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpbnB1dCBpZD1cIm5vbWVcIlxyXG4gIH1cclxufVxyXG5cclxuYDtcclxuXHJcbmNvbnN0IGh0bWwgPSBjbWxUb0h0bWwoc3RyaW5nKTtcclxuXHJcbmRvY3VtZW50LmhlYWQ/LnJlcGxhY2VXaXRoKGh0bWwuaGVhZCk7XHJcblxyXG5kb2N1bWVudC5ib2R5Py5yZXBsYWNlV2l0aChodG1sLmJvZHkpOyJdLCJuYW1lcyI6WyJUT0tFTiIsIlJlZ0V4cCIsInRoaXMiLCJXT1JEIiwic291cmNlIiwiRE9DVFlQRSIsIk1PRFVMRSIsIk9QRU5fQlJBQ0tFVCIsIkNMT1NFX0JSQUNLRVQiLCJPUEVOX0JSQUNFIiwiQ0xPU0VfQlJBQ0UiLCJTVFJJTkciLCJUQUciLCJLRVlXT1JEIiwiQlJBQ0tFVFMiLCJCUkFDRVMiLCJFUVVBTCIsIk5FV19MSU5FIiwiRVhBQ1QiLCJNQVRDSCIsIkFXQUlUIiwiVmlydHVhbE5vZGUiLCJuYW1lIiwiYXR0cmlidXRlcyIsIk1hcCIsImNoaWxkcmVuIiwicGFyZW50IiwiYXBwZW5kQ2hpbGQiLCJjaGlsZCIsInB1c2giLCJ1bmRlZmluZWQiLCJyb290IiwiZGVjbGFyZUxpc3QiLCJyZXBsYWNlQ2hpbGRyZW4iLCJ2aXJ0dWFsTm9kZSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImFuYWx5emUiLCJkZWNsYXJlIiwidGVzdCIsImZpbHRlciIsImEiLCJzZXQiLCJvYmplY3QiLCJnZXQiLCJFcnJvciIsInRlbXBsYXRlIiwiY2xvbmUiLCJhdHRyaWJ1dGUiLCJWT0lEX1RBRyIsImdlbmVyYXRlIiwiam9pbiIsImNtbFRvU3RyaW5nIiwic3RyaW5nIiwidG9rZW5MaXN0IiwiQVRUUklCVVRFX05BTUUiLCJTVEFURSIsImRvY3VtZW50IiwiSUdOT1JFX05FV19sSU5FIiwiY3JlYXRlVmlydHVhbE5vZGUiLCJub2RlIiwiQVRUUklCVVRFIiwidXBMZXZlbCIsInRva2VuIiwiQ0hJTERSRU4iLCJzbGljZSIsIlZBTFVFIiwicGFyc2UiLCJsZXhBcnJheSIsIm1hdGNoQWxsIiwibWF0Y2giLCJzY2FuIiwicGFyc2VyIiwiRE9NUGFyc2VyIiwiaHRtbCIsImNtbFJlc3VsdCIsInBhcnNlRnJvbVN0cmluZyIsImNtbFRvSHRtbCIsImhlYWQiLCJyZXBsYWNlV2l0aCIsImJvZHkiXSwic291cmNlUm9vdCI6IiJ9